# CHAPTER 3 . 서비스 모델링하기
- 느슨한 결합과 강한 응집력이 좋은 서비스를 만들어낸다.

## 느슨한 결합 (loose coupling)
- 마이크로서비스는 시스템의 그 어떤 부분도 추가 변경할 필요 없이 특정 서비스를 변경하고 배포할 수 있다.
- 협업하는 서비스에 관해 알 필요가 없다.
- 반대로 강한 결합을 일으키는 요소는?
  - 서비스를 서로 강하게 엮어버리는 통합 방식을 선택하는 것이다.
  - 내부 변경 = 서비스의 소비자 변경
  
## 강한 응집력 (high cohesion)
- 서로 연관된 행위가 한 곳에 모이고, 다른 경계와는 가능한 느슨하게 소통한다.
- 특정 행위를 변경하고자 할 때 한 곳에서 변경을 하여 신속하게 릴리즈가 가능하다.

## 경계가 있는 콘텍스트
- 모든 도메인은 다수의 경계가 있는 콘텍스트로 구성되며, 각 콘텍스트 내에는 외부와 통신할 필요가 없는 것뿐만 아니라 경계가 있는 다른 콘텍스트 외부와 공유하는 모델
- 명백한 인터페이스가 존재하며, 그것은 어떤 모델이 다른 콘텍스트와 공유될지 결정한다.
- 감춰진 공유 모델
  - 재무부서에서 평가를 산출하기 위해 필요한 재고품목 모델이 공유 모델이 된다. 하지만 이 공유모델은 모든 정보를 노출할 필요는 없다.
- 마이크로서비스는 경계가 있는 콘텍스트와 완전히 정렬된다.
- 도메인에 대한 경험없이 시스템을 마이크로서비스로 성급하게 분리하면 막대한 비용이 소요될 수 있다.

## 비즈니스 능력
- 경계가 있는 콘텍스트에 관해 고민할때는 공유 데이터 관점이 아닌 나머지 도메인을 제공하는 콘텍스트의 능력 관점에서 봐야 한다. 아래 두 가지 질문을 먼저 해봐야한다.
  - 이 콘텍스트는 무엇을 하는가?
  - 그 일을 하기 위해 어떤 데이터가 필요한가?
  
## 거북이 밑에 거북이
- 마이크로서비스의 경계를 고려할 때는 큰 단위의 콘텍스트 관점에서 생각한 뒤 접합부의 분리를 통한 혜택을 발견했을 때 내포된 콘텍스트에 따라 세분화해야한다.

## 비즈니스 콘셉트 관점에서의 커뮤니케이션
- 도메인을 대표하는 경계가 있는 콘텍스트들에 따라 우리 시스템이 분해된다면 그 변경 사항은 단일 마이크로서비스 경계로 격리되기 쉽다.
- 비즈니스 콘셉트 관점에서 마이크로서비스 간의 커뮤니케이션을 생각하는 것이 중요하다. 
- 마이크로서비스 간에 전송되는 형태를 조직 간에 전송되는 형태와 동일시 해야한다.

## 기술적 경계
- 기술 접합부에 따라 서비스 경계를 모델링 했는지 확인해봐야한다.
- 조직이 특정 성능 목표를 달성하려고 할 때 수평으로 나누는 방식이 더 적절하다.







