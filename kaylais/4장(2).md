## 4.통합(2)  

> 고객 정보 변경에 관한 결정이 고객 서비스 외부에서 이뤄진다면 응집력을 잃은 것   

### Rx(Reactive Extension)  
반응형 확장 라이브러리   
- Observer pattern에 기반을 두고 설계됨  
- 관찰 대상 순서를 이용하여 비동기 이벤트 기반의 반응형 프로그래밍을 지원하는 라이브러리  
- 다수의 호출 결과를 조회하고 그 결과에 따라 연산을 실행하는 메커니즘  
- 이들 호추른 그 자체로 blocking or nonblocking 호출이 될 수 있음  
- 하위 서비스에 대해 동시에 발생하는 호출들을 훨씬 쉽게 처리하면서 다수의 호출을 함께 조립할 수 있다는 것  

내부적으로 Rx는 전통적인 흐름을 뒤집음   
- 데이터를 요청하는 대신 데이터에 대한 연산을 수행, 그 연산(또는 연산의 집합)의 결과를 관찰, 변경에 따라 반응  
- 일부 Rx 구현제를 통해 관찰 대상의 함수를 수행 할 수 있음  
- RxJava에서는 map과 filter같은 전통적인 함수가 수행 될 수 있음  


> 여러분 시스템의 도처에 있는 중복된 행위를 변경하려 할 때 모든 것을 제대로 변경하기 어렵고 이는 버그로 이어질 수 있다.  
> 따라서 일반적으로 DRY를 기도문으로 사용하는 것도 일리가 있다.  


### DRY(Don't Repeat Yourself)  
중복된 코드를 회피하는 시도로 단순하게 정의되지만, 더 명확하게 정의하자면 시스템의 행동양식과 지식의 중복을 회피하는 모든 시도  
- 반드시 피해야 할 위험 중 하나는 마이크로서비스와 소비자 간의 지나친 결합  
- 마이크로서비스 자체의 작은 변경 사항 하나가 많은 소비자에게 불필요한 변경을 초래 할 수 있음  
- 공유 코드의 사용이 이러한 결합을 만듬  

공유 코드를 서비스 경계를 넘어서 사용한다면 잠재적인 결합의 문제를 안고 있는 셈  
- 하지만 로깅 라이브러리와 같은 공통 코드는 외부에서는 보이지 않는 내부의 개념이므로 사용해도 문제 없음  
- 코드를 공유하기보다는 결합이 생기지 않도록 그 템플릿을 새로운 서비스마다 복사  


### 클라이언트 라이브러리  
클라이언트 라이브러리의 업데이트 시점을 클라이언트가 담당하게 하라   
- 각 서비스를 항상 독립적으로 릴리스 할 능력을 유지해야 하기 때문  

### 포스텔의 법칙 - 견고성의 원칙  
서비스를 가능한 한 유연하게 소비하는 클라이언트를 만들려는 사례   
전송할 때는 보수적으로, 받아들일 때는 자유롭게  

### Semantic versioning  
유의적 버전 관리. 클라이언트가 서비스의 버전 번호만 보고도 해당 서비스와 통합 가능한지 알 수 있는 명세  
**MAJOR.MINOR.PATCH** 형태  
- MAJOR : 하위 호환성이 깨진 변경이 발생 했음  
- MINOR : 하위 호환성을 유지하면서 새로운 기능들이 추가되었음  
- PATCH : 기존 기능의 버그를 수정했다는 것을 의미  

### 다수의 병행 서비스 버전 사용하기  
다양한 버전의 서비스를 동시에 실행하고, 구 소비자의 트래픽을 구버전에, 신규 소비자의 신버전에 라우팅하는 것   
단점  
- 한 서비스의 내부 버그를 고치려면 두 벌의 서로 다른 서비스를 수정하고 배포해야 함  
- 소비자가 찾는 서비스로 유도하기 위한 부가적인 로직이 필요  
- 서비스가 처리해야할 영속적 상태가 있는지 고려  

### API Gateway  
클라이언트에 개별 서비스를 액세스할 수 있는 단일 접근 지점이 되어 클라이언트의 요청을 적절히 해당 서비스로 라우팅하거나 다양한 서비스로 분배  
클라이언트에 최적화된 API를 제공하고, 클라이언트의 인증 및 접근 제어를 가능하게 함  

### UI 부분 구성  
큰 단위의 UI 부분은 서버 측 애플리케이션으로부터 제공, 적절한 API 호출을 수행  
UI 부분이 팀의 소유권과 완전히 일치할 때 가장 잘 작동  
예로, 뮤직 쇼핑몰에서 주문 관리를 담다하는 팀은 주문 관리와 연관된 모든 페이지를 구성해서 제공하는 것  
그러나 사용자 경험의 일관성 유지는 풀어야할 숙제  


---  
**bootstrapping**  
일반적으로 컴퓨터의 전원이 켜지거나 리셋된 후 외부 입력 없이 기본 소프트웨어를 메모리에 로드하여 독립 수행하는 과정  
